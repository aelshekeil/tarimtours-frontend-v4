import{r as n}from"./index-Di1m-Kd0.js";import{t as m,s as d,a as y}from"./applicationApi-CCPG1awT.js";const N=()=>{const[r,e]=n.useState(!1),[o,i]=n.useState(null),[p,s]=n.useState(null),[c,l]=n.useState(null);return{loading:r,error:o,trackingNumber:p,applicationStatus:c,submitDrivingLicense:async a=>{e(!0),i(null);try{const t=new FormData;t.append("fullName",a.fullName),t.append("email",a.email),t.append("phone",a.phone),t.append("dateOfBirth",a.dateOfBirth),t.append("nationality",a.nationality),t.append("address",a.address),t.append("idCopy",a.idCopy),t.append("photo",a.photo),t.append("oldLicenseCopy",a.oldLicenseCopy);const u=await y.post("https://vrvrhzseqnjpriqesgoj.supabase.co/rest/v1/international_driving_license_applications",t,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZydnJoenNlcW5qcHJpcWVzZ29qIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxNjA4OTAsImV4cCI6MjA2NzczNjg5MH0.1D9ES2hGCgC8726b9HNiPNoQF1SYxHYjTezUGshMFNM",Authorization:`Bearer ${localStorage.getItem("jwt")}`,"Content-Type":"multipart/form-data"}});s(u.data.trackingNumber)}catch{i("Failed to submit application. Please try again.")}finally{e(!1)}},submitVisa:async a=>{e(!0),i(null);try{const t=await d(a);s(t.trackingNumber)}catch{i("Failed to submit application. Please try again.")}finally{e(!1)}},track:async a=>{e(!0),i(null);try{const t=await m(a);l(t)}catch{i("Failed to track application. Please check the tracking number and try again.")}finally{e(!1)}}}};export{N as u};
