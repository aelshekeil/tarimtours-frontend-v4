import{a as L,r,j as e,M as j,E as A}from"./index-Di1m-Kd0.js";import{S as p}from"./search-D8lRSlKM.js";import{H as k}from"./heart-B8e9FfI3.js";import{C as F,a as D}from"./clock-BljDZh0L.js";import{D as T}from"./dollar-sign-Brp6NSFh.js";import{S as z}from"./star-CFEBXLpC.js";import{A as O}from"./arrow-right-BEO-snS7.js";const o="https://vrvrhzseqnjpriqesgoj.supabase.co",R=`${o}/api/travel-packages?populate=*`,J=()=>{const{t}=L(),[x,b]=r.useState([]),[n,h]=r.useState([]),[v,u]=r.useState(!0),[c,N]=r.useState(null),[l,w]=r.useState(""),[i,y]=r.useState("All"),[g,_]=r.useState(new Set),[d,$]=r.useState(!1);r.useEffect(()=>{(async()=>{try{u(!0);const a=await fetch(R);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const f=(await a.json()).data;b(f),h(f)}catch(a){N(a),console.error("Error fetching travel packages:",a)}finally{u(!1)}})()},[]),r.useEffect(()=>{let s=x;l&&(s=s.filter(a=>a.title.toLowerCase().includes(l.toLowerCase())||a.destination.toLowerCase().includes(l.toLowerCase())||a.description.toLowerCase().includes(l.toLowerCase()))),d&&(s=s.filter(a=>a.featured)),i!=="All"&&(s=s.filter(a=>{switch(i){case"Under $200":return a.price<200;case"$200-$500":return a.price>=200&&a.price<500;case"$500-$1000":return a.price>=500&&a.price<1e3;case"Over $1000":return a.price>=1e3;default:return!0}})),h(s)},[x,l,d,i]);const S=s=>{const a=new Set(g);a.has(s)?a.delete(s):a.add(s),_(a)},C=s=>s.includes("days")||s.includes("day")||isNaN(parseInt(s))?s:`${s} ${t("common.days")}`,P=s=>s?s.formats?.medium?`${o}${s.formats.medium.url}`:s.formats?.small?`${o}${s.formats.small.url}`:`${o}${s.url}`:"",E=s=>s.replace(/\n+/g," ").replace(/\s+/g," ").trim();return v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 rounded-md w-64 mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded-md w-96 mx-auto"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(6)].map((s,a)=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-300"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded mb-4"}),e.jsx("div",{className:"h-16 bg-gray-300 rounded mb-4"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-20"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-16"})]})]})]},a))})]})}):c?(console.error("Error loading travel packages:",c),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t("common.error_loading_packages")}),e.jsx("p",{className:"text-gray-600 mb-4",children:c.message}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("common.try_again")})]})})})):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:[t("common.discover_amazing_destinations_part1")," ",e.jsx("span",{className:"text-blue-600",children:t("common.discover_amazing_destinations_part2")})," ",t("common.discover_amazing_destinations_part3")]}),e.jsx("p",{className:"text-xl text-gray-600",children:t("common.explore_southeast_asia_description")})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:t("common.search_destinations_activities_placeholder"),value:l,onChange:s=>w(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:s=>$(s.target.checked),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t("common.featured_only")})]}),e.jsxs("select",{value:i,onChange:s=>y(s.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"All",children:t("common.all_prices")}),e.jsx("option",{value:"Under $200",children:t("common.under_200")}),e.jsx("option",{value:"$200-$500",children:t("common.200_500")}),e.jsx("option",{value:"$500-$1000",children:t("common.500_1000")}),e.jsx("option",{value:"Over $1000",children:t("common.over_1000")})]})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("p",{className:"text-gray-600",children:[n.length," ",n.length===1?t("common.package"):t("common.packages")," ",t("common.found")]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(s=>{const a=P(s.cover_image),m=g.has(s.id);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 group",children:[e.jsxs("div",{className:"relative",children:[a&&e.jsx("img",{src:a,alt:s.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),!a&&e.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx(j,{className:"w-16 h-16 text-white opacity-50"})}),e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[e.jsx("button",{onClick:()=>S(s.id),className:`p-2 rounded-full backdrop-blur-sm transition-colors ${m?"bg-red-500 text-white":"bg-white/80 text-gray-600 hover:bg-white hover:text-red-500"}`,children:e.jsx(k,{className:`w-4 h-4 ${m?"fill-current":""}`})}),s.featured&&e.jsx("div",{className:"px-3 py-1 bg-yellow-500 text-white rounded-full text-sm font-medium",children:t("common.featured")})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-blue-600 transition-colors",children:s.title})}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[e.jsx(j,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:s.destination})]}),e.jsx("p",{className:"text-gray-700 mb-4 line-clamp-3 leading-relaxed",children:E(s.description)}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:C(s.duration)})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:s.price})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"w-4 h-4 text-yellow-500 fill-current mr-1"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.rating?s.rating.toFixed(1):t("common.no_rating")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center group",children:[t("common.book_now"),e.jsx(O,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]}),e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(A,{className:"w-4 h-4"})})]})]})]},s.id)})}),n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t("common.no_packages_found_title")}),e.jsx("p",{className:"text-gray-600",children:t("common.no_packages_found_text")})]})]})]})};export{J as default};
