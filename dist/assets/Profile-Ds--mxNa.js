import{c as C,a as k,b as E,r as a,j as e,d as I,L as F,s as y,i as U}from"./index-DKxbjwny.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=C("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),D=()=>{const{t:s}=k(),{user:l,isLoggedIn:_}=E(),[r,p]=a.useState(""),[f,P]=a.useState(""),[x,h]=a.useState(""),[u,b]=a.useState(""),[m,g]=a.useState(""),[n,d]=a.useState(!1),[w,o]=a.useState(null),[j,i]=a.useState(null);a.useEffect(()=>{l&&(p(l.username||""),P(l.email||""))},[l]);const S=async t=>{t.preventDefault(),d(!0),o(null),i(null);try{await y.updateProfile(l.id,{username:r}),i(s("profile.profile_updated_successfully"));const c=localStorage.getItem("user");if(c){const v=JSON.parse(c);v.user.username=r,localStorage.setItem("user",JSON.stringify(v)),window.dispatchEvent(new Event("authChange"))}const N=localStorage.getItem("i18nextLng");N&&U.changeLanguage(N)}catch{o(s("profile.failed_to_update_profile"))}finally{d(!1)}},L=async t=>{if(t.preventDefault(),u!==m){o(s("profile.new_passwords_do_not_match"));return}d(!0),o(null),i(null);try{await y.changePassword({currentPassword:x,password:u,passwordConfirmation:m}),i(s("profile.password_changed_successfully")),h(""),b(""),g("")}catch{o(s("profile.failed_to_change_password"))}finally{d(!1)}};return _?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-100 py-20 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl p-8 mb-10 shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center text-3xl font-bold shadow-md backdrop-blur-sm",children:r?.charAt(0)?.toUpperCase()}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-1",children:r}),e.jsxs("div",{className:"flex items-center text-blue-100",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),f]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center",children:[e.jsx(A,{className:"w-6 h-6 mr-3 text-blue-600"}),s("profile.update_profile")]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:s("profile.full_name")}),e.jsx("input",{type:"text",id:"name",value:r,onChange:t=>p(t.target.value),className:"w-full px-4 py-2 rounded-md border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:s("profile.email_address")}),e.jsx("input",{type:"email",id:"email",value:f,disabled:!0,className:"w-full px-4 py-2 rounded-md bg-slate-100 border border-slate-300 cursor-not-allowed"})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-md",disabled:n,children:s(n?"profile.saving":"profile.save_changes")})]}),w&&e.jsx("p",{className:"mt-4 text-sm text-red-600",children:w}),j&&e.jsx("p",{className:"mt-4 text-sm text-green-600",children:j})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center",children:[e.jsx(F,{className:"w-6 h-6 mr-3 text-blue-600"}),s("profile.change_password")]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:s("profile.current_password")}),e.jsx("input",{type:"password",id:"currentPassword",value:x,onChange:t=>h(t.target.value),className:"w-full px-4 py-2 rounded-md border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:s("profile.new_password")}),e.jsx("input",{type:"password",id:"newPassword",value:u,onChange:t=>b(t.target.value),className:"w-full px-4 py-2 rounded-md border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:s("profile.confirm_new_password")}),e.jsx("input",{type:"password",id:"confirmPassword",value:m,onChange:t=>g(t.target.value),className:"w-full px-4 py-2 rounded-md border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-md",disabled:n,children:s(n?"profile.updating":"profile.update_password")})]})]})]})]})}):null};export{D as default};
