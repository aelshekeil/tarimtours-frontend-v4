import{a as P,r as a,b as z,j as e}from"./index-DJmngt_-.js";import{C as A,s as M}from"./applicationApi-CQqtXAJF.js";import{P as R,a as V,D as b,b as W}from"./style-MshoPIIT.js";import{F as C}from"./file-text-CXd8-jbj.js";import{c as h,e as I}from"./en-Drp4P3V2.js";h.registerLocale(I);h.registerLocale(W);const G=()=>{const{t:s,i18n:k}=P(),[q,p]=a.useState(1),[o,g]=a.useState(!1),[m,f]=a.useState({}),[l,F]=a.useState({}),[j,y]=a.useState(!1),[v,w]=a.useState(null),[N,D]=a.useState(null),[_,d]=a.useState(null),{isLoggedIn:L,user:S}=z(),x=a.useCallback((r,n)=>{F(t=>({...t,[n]:r}))},[]),i=a.useCallback((r,n)=>{if(n==="phone"&&typeof r=="string")f(t=>({...t,phone:r}));else if(typeof r=="object"&&"target"in r){const{name:t,value:u}=r.target;f(c=>({...c,[t]:u}))}},[]),T=async r=>{r.preventDefault(),d(null);const t=["fullName","email","phone","passportNumber","nationality","destinationCountry","visaType","travelDate"].filter(c=>!m[c]);if(t.length>0){d(`${s("common.fill_required_fields")}: ${t.join(", ")}`);return}if(!l.passportCopy||!l.photo){d(s("common.upload_required_documents"));return}if(!S?.id){d(s("common.login_required_text"));return}const u={...m,passportCopy:l.passportCopy,photo:l.photo};l.additionalDocuments&&(u.additionalDocuments=l.additionalDocuments),y(!0),w(null);try{const c=await M(u);D(c.data.trackingNumber),p(4)}catch(c){w(c.message||s("common.submission_failed"))}finally{y(!1)}},B=r=>{r.preventDefault();const t=["fullName","email","phone","passportNumber","nationality","destinationCountry","visaType","travelDate"].filter(u=>!m[u]);if(t.length>0){d(`${s("common.fill_required_fields")}: ${t.join(", ")}`);return}if(!l.passportCopy||!l.photo){d(s("common.upload_required_documents"));return}d(null),g(!0),p(2)},E=[s("visa_application.steps.upload"),s("visa_application.steps.review"),s("visa_application.steps.payment"),s("visa_application.steps.delivery")];return N?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-12 text-center max-w-2xl w-full border border-gray-100",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:s("common.submission_successful")}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your application has been successfully submitted and is being processed."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("p",{className:"text-lg text-gray-700 mb-2",children:s("common.tracking_number_is")}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:N})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx(R,{currentStep:q,steps:E}),L?e.jsxs("form",{onSubmit:o?T:B,children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-100",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center",children:[e.jsx(C,{className:"w-6 h-6 text-blue-600"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{name:"fullName",placeholder:s("common.full_name"),onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",required:!0,disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{name:"email",type:"email",placeholder:s("common.email"),onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",required:!0,disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx(V,{name:"phone",placeholder:s("common.phone"),value:m.phone,onChange:r=>i(r||"","phone"),className:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",required:!0,disabled:o,defaultCountry:"US",international:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passport Number"}),e.jsx("input",{name:"passportNumber",placeholder:s("visa_application.passport_number"),onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",required:!0,disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nationality"}),e.jsxs("select",{name:"nationality",value:m.nationality||"",onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",required:!0,disabled:o,children:[e.jsx("option",{value:"",children:s("common.select_nationality")}),Object.entries(h.getNames(k.language==="ar"?"ar":"en")).map(([r,n])=>e.jsx("option",{value:n,children:n},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination Country"}),e.jsx("input",{name:"destinationCountry",placeholder:s("visa_application.destination_country"),onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",required:!0,disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visa Type"}),e.jsxs("select",{name:"visaType",onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",required:!0,disabled:o,children:[e.jsx("option",{value:"",children:s("visa_application.select_visa_type")}),e.jsx("option",{value:"tourist",children:s("visa_application.tourist_visa")}),e.jsx("option",{value:"business",children:s("visa_application.business_visa")}),e.jsx("option",{value:"student",children:s("visa_application.student_visa")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Travel Date"}),e.jsx("input",{name:"travelDate",type:"date",onChange:i,className:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",required:!0,disabled:o})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border border-green-100",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center",children:[e.jsx(C,{className:"w-6 h-6 text-green-600"}),"Required Documents"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(b,{onFileChange:r=>x(r,"passportCopy"),label:s("visa_application.passport_copy")}),e.jsx(b,{onFileChange:r=>x(r,"photo"),label:s("visa_application.photo")}),e.jsx(b,{onFileChange:r=>x(r,"additionalDocuments"),label:s("common.additional_documents")})]})]})]}),(_||v)&&e.jsx("div",{className:"mt-8 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-700 font-medium",children:_||v})]})}),e.jsx("div",{className:"mt-12 flex flex-col sm:flex-row gap-4 justify-center",children:o?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),p(1)},className:"px-8 py-4 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-300 font-semibold border border-gray-300 hover:border-gray-400",children:s("common.edit")}),e.jsx("button",{type:"submit",className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s("common.submitting")]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),s("common.submit_application")]})})]}):e.jsxs("button",{type:"submit",className:"px-12 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s("common.review_application")]})})]}):e.jsxs("div",{className:"text-center p-12 bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-200 rounded-2xl mt-8",children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-2xl font-bold text-yellow-800 mb-4",children:s("common.login_required_title")}),e.jsx("p",{className:"text-yellow-700 text-lg",children:s("common.login_required_text")})]})]})};export{G as default};
